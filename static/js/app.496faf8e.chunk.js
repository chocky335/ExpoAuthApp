(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{112:function(t){t.exports=JSON.parse('{"IS_PROD":false,"FACEBOOK_ID":"704970937451892","FACEBOOK_TOKEN":"1bd360a7dad49cf9434aa59ba5f27f0a","BUNDLE_ID":"com.chocky335.expoauthapp","DISPLAY_NAME":"ExpoAuthApp DEV","GOOGLE_WEB_ID":"319303053503-df9kta5ma3n7tll92m7as2teo9b65938.apps.googleusercontent.com","GOOGLE_ANDROID_ID":"319303053503-ihcmoa1pv1ghro66mq6jcutk9v95bm3n.apps.googleusercontent.com"}')},191:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return ht}));var r=n(192),o=n(77),c=n(10),i=n.n(c),a=n(114),u=n(113),s=n(0),l=n.n(s),f=n(9),d=n(16),b=l.a.createContext({state:null,startOAuth:function(){},authorizeSucceed:function(){},authorizeFailed:function(){},logout:function(){}}),O=function(t){var e=t.children,n=Object(s.useState)(null),r=i()(n,2),o=r[0],c=r[1],l=Object(s.useState)(null),O=i()(l,2),p=O[0],j=O[1],h=Object(s.useState)(null),g=i()(h,2),y=g[0],v=g[1],k=Object(s.useCallback)((function(t){var e=JSON.stringify({provider:o,token:t});"web"===f.default.OS?u.default.setItem("__Auth",e):a.setItemAsync("__Auth",e),v(t)}),[o]),m=Object(s.useCallback)((function(){"web"===f.default.OS?u.default.removeItem("__Auth"):a.deleteItemAsync("__Auth"),v(null),c(null),j(null)}),[]);Object(s.useEffect)((function(){var t=function(t){if(t){var e=JSON.parse(t),n=e.provider,r=e.token;c(n),v(r)}};"web"===f.default.OS?u.default.getItem("__Auth").then(t):a.getItemAsync("__Auth").then(t)}),[]);var x=function(t){var e=t.provider,n=t.error,r=t.token;return e&&n?{provider:e,error:n,isLoading:!1}:e&&r?{token:r,provider:e,isLoading:!1}:e?{provider:e,isLoading:!0}:null}({provider:o,error:p,token:y});return Object(d.jsx)(b.Provider,{value:{state:x,startOAuth:c,authorizeSucceed:k,authorizeFailed:j,logout:m},children:e})},p=(b.Consumer,b),j=n(6),h=n.n(j),g=n(5),y=n.n(g),v=n(280),k=n(134),m=n(132);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){h()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C=n(195);function w(){return Object(C.default)()}var S=n(281),P=n(282),D=n(101),E=n(283),_=n(98),I=n.n(_),L=n(11),z=n(50),T=n(196),N=n(194),G=n(31),R={light:{text:"#000",background:"#fff",tint:"#2f95dc",button:"#03DAC5",buttonTint:"#000",loading:"#fff"},dark:{text:"#fff",background:"#000",tint:"#fff",button:"#6200EE",buttonTint:"#fff",loading:"#fff"}},B=n(173),F=n(127),J=n(18),M=n.n(J),W=n(45),H=n(14),K=["style","lightColor","darkColor"],U=["style","lightColor","darkColor"];function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){h()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Y(t,e){var n=w(),r=t[n];return r||R[n][e]}function Q(t){var e=t.style,n=t.lightColor,r=t.darkColor,o=M()(t,K),c=Y({light:n,dark:r},"text");return Object(d.jsx)(W.default,V({style:[{color:c},e]},o))}function X(t){var e=t.style,n=t.lightColor,r=t.darkColor,o=M()(t,U),c=Y({light:n,dark:r},"background");return Object(d.jsx)(H.default,V({style:[{backgroundColor:c},e]},o))}function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){h()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tt(t){return Object(d.jsx)(Q,$($({},t),{},{style:[t.style,{fontFamily:"space-mono"}]}))}function et(t){var e=t.disabled,n=t.isLoading,r=t.onPress,o=t.title,c=w(),i=Object(s.useMemo)((function(){return{backgroundColor:"dark"===c?R.dark.button:R.light.button}}),[c]),a=Object(s.useMemo)((function(){return{color:"dark"===c?R.dark.buttonTint:R.light.buttonTint}}),[c]),u=Object(s.useMemo)((function(){return"dark"===c?R.dark.loading:R.light.loading}),[c]);return n?Object(d.jsx)(F.default,{disabled:!0,style:[nt.container,i],children:Object(d.jsx)(B.default,{color:u})}):Object(d.jsx)(F.default,{disabled:e,onPress:r,style:[nt.container,i],children:Object(d.jsx)(tt,{style:a,children:o})})}var nt=L.default.create({container:{padding:20,minWidth:"30%",justifyContent:"center",alignItems:"center"}});function rt(t){var e=t.provider,n=t.authConfig,r=t.authHook,o=t.successCallback,c=t.errorCallback,a=t.isLoading,u=t.startOAuth,s=r(n),f=i()(s,3),b=f[0],O=f[1],p=f[2];l.a.useEffect((function(){"dismiss"!==(null==O?void 0:O.type)&&"cancel"!==(null==O?void 0:O.type)||c(e.toUpperCase()+" Authentication was "+(null==O?void 0:O.type)+"ed"),"success"===(null==O?void 0:O.type)&&O.authentication&&o(O.authentication),"error"===(null==O?void 0:O.type)&&O.error&&c(O.error.message)}),[O]);var j=l.a.useCallback((function(){u(e),p()}),[e,u,p]);return Object(d.jsx)(et,{isLoading:a,disabled:!b,onPress:j,title:"Login with "+e})}L.default.create({text:{color:R.light.buttonTint}});var ot=n(112);z.maybeCompleteAuthSession();var ct={androidClientId:ot.GOOGLE_ANDROID_ID,webClientId:ot.GOOGLE_WEB_ID},it={clientId:ot.FACEBOOK_ID,responseType:G.ResponseType.Token};function at(t){I()(t);var e=Object(s.useContext)(p),n=e.authorizeSucceed,r=e.authorizeFailed,o=e.startOAuth,c=function(t){var e=t.state;return e&&"init"!==e&&"isLoading"in e&&e.isLoading?e.provider:null}(e),i="facebook"===c,a="google"===c,u=function(t){var e=t.state;return e&&"init"!==e&&"error"in e?e.error:null}(e);return l.a.useEffect((function(){return"web"!==f.default.OS&&z.warmUpAsync(),function(){"web"!==f.default.OS&&z.coolDownAsync()}}),[]),Object(d.jsxs)(X,{style:ut.container,children:[u&&Object(d.jsxs)(tt,{children:["Error: ",u]}),u&&Object(d.jsx)(X,{style:ut.separator}),Object(d.jsx)(rt,{provider:"google",authConfig:ct,authHook:N.useAuthRequest,successCallback:n,errorCallback:r,startOAuth:o,isLoading:a}),Object(d.jsx)(X,{style:ut.separator}),Object(d.jsx)(rt,{provider:"facebook",authConfig:it,authHook:T.useAuthRequest,successCallback:n,errorCallback:r,startOAuth:o,isLoading:i})]})}var ut=L.default.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),st=function(t){return fetch("https://www.googleapis.com/oauth2/v3/userinfo?access_token="+t)},lt=function(t){return fetch("https://graph.facebook.com/me?fields=email,name&access_token="+t)};function ft(t){I()(t);var e=function(){var t=Object(s.useContext)(p).state,e=Object(s.useState)(null),n=i()(e,2),r=n[0],o=n[1];return Object(s.useEffect)((function(){t&&"init"!==t&&"token"in t&&("google"===t.provider?st:lt)(t.token.accessToken).then((function(t){return t.json()})).then((function(t){return o(t.email)}))}),[]),r}(),n=Object(s.useContext)(p),r=n.state,o=n.logout,c=r&&"string"!==typeof r&&r.provider||"";return Object(d.jsxs)(X,{style:dt.container,children:[Object(d.jsxs)(tt,{children:["Provider: ",c]}),Object(d.jsx)(tt,{children:e}),Object(d.jsx)(et,{onPress:o,title:"Logout"})]})}var dt=L.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),bt={prefixes:[n(55).createURL("/")],config:{screens:{Authorized:"dash",NotAuthorized:"welcome"}}};function Ot(t){var e=t.colorScheme;return Object(d.jsx)(S.default,{linking:bt,theme:"dark"===e?P.default:D.default,children:Object(d.jsx)(jt,{})})}var pt=Object(E.default)();function jt(){var t=function(t){var e=t.state;return e&&"init"!==e&&"token"in e}(s.useContext(p));return Object(d.jsxs)(pt.Navigator,{children:[!t&&Object(d.jsx)(pt.Screen,{name:"NotAuthorized",component:at,options:{title:"Please authorize"}}),t&&Object(d.jsx)(pt.Screen,{name:"Authorized",component:ft,options:{title:"Authorized"}})]})}function ht(){var t=function(){var t=Object(s.useState)(!1),e=i()(t,2),r=e[0],o=e[1];return Object(s.useEffect)((function(){function t(){return(t=y()((function*(){try{m.preventAutoHideAsync(),yield k.loadAsync(A(A({},v.default.font),{},{"space-mono":n(226)}))}catch(t){console.warn(t)}finally{o(!0),m.hideAsync()}}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),r}(),e=w();return t?Object(d.jsxs)(o.SafeAreaProvider,{children:[Object(d.jsx)(O,{children:Object(d.jsx)(Ot,{colorScheme:e})}),Object(d.jsx)(r.StatusBar,{})]}):null}},205:function(t,e,n){t.exports=n(270)},226:function(t,e,n){t.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},239:function(t,e){}},[[205,1,2]]]);
//# sourceMappingURL=app.496faf8e.chunk.js.map