(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{113:function(t){t.exports=JSON.parse('{"IS_PROD":false,"FACEBOOK_ID":"704970937451892","FACEBOOK_TOKEN":"1bd360a7dad49cf9434aa59ba5f27f0a","BUNDLE_ID":"com.chocky335.expoauthapp","DISPLAY_NAME":"ExpoAuthApp DEV","GOOGLE_WEB_ID":"319303053503-df9kta5ma3n7tll92m7as2teo9b65938.apps.googleusercontent.com","GOOGLE_ANDROID_ID":"319303053503-ihcmoa1pv1ghro66mq6jcutk9v95bm3n.apps.googleusercontent.com"}')},191:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return vt}));var r=n(192),o=n(77),c=n(11),i=n.n(c),a=n(115),u=n(114),s=n(0),l=n.n(s),f=n(9),d=n(15),b=l.a.createContext({state:null,startOAuth:function(){},authorizeSucceed:function(){},authorizeFailed:function(){},logout:function(){}}),O=function(t){var e=t.children,n=Object(s.useState)(null),r=i()(n,2),o=r[0],c=r[1],l=Object(s.useState)(null),O=i()(l,2),p=O[0],h=O[1],j=Object(s.useState)(null),g=i()(j,2),y=g[0],v=g[1],m=Object(s.useCallback)((function(t){var e=JSON.stringify({provider:o,token:t});"web"===f.default.OS?u.default.setItem("__Auth",e):a.setItemAsync("__Auth",e),v(t)}),[o]),k=Object(s.useCallback)((function(){"web"===f.default.OS?u.default.removeItem("__Auth"):a.deleteItemAsync("__Auth"),v(null),c(null),h(null)}),[]);Object(s.useEffect)((function(){var t=function(t){if(t){var e=JSON.parse(t),n=e.provider,r=e.token;c(n),v(r)}};"web"===f.default.OS?u.default.getItem("__Auth").then(t):a.getItemAsync("__Auth").then(t)}),[]);var x=function(t){var e=t.provider,n=t.error,r=t.token;return e&&n?{provider:e,error:n,isLoading:!1}:e&&r?{token:r,provider:e,isLoading:!1}:e?{provider:e,isLoading:!0}:null}({provider:o,error:p,token:y});return Object(d.jsx)(b.Provider,{value:{state:x,startOAuth:c,authorizeSucceed:m,authorizeFailed:h,logout:k},children:e})},p=(b.Consumer,function(t){var e=t.state;return e&&"init"!==e&&"token"in e}),h=b,j=n(6),g=n.n(j),y=n(5),v=n.n(y),m=n(280),k=n(135),x=n(133);function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S=n(195);function w(){return Object(S.default)()}var P=n(281),D=n(282),E=n(102),_=n(283),I=n(98),z=n.n(I),L=n(10),N=n(50),T=n(196),F=n(194),R=n(31),G={light:{text:"#000",background:"#fff",tint:"#2f95dc",button:"#03DAC5",buttonTint:"#000",loading:"#fff"},dark:{text:"#fff",background:"#000",tint:"#fff",button:"#6200EE",buttonTint:"#fff",loading:"#fff"}},B=n(99),M=n(128),W=n(18),J=n.n(W),H=n(45),K=n(14),U=["style","lightColor","darkColor"],V=["style","lightColor","darkColor"];function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Q(t,e){var n=w(),r=t[n];return r||G[n][e]}function X(t){var e=t.style,n=t.lightColor,r=t.darkColor,o=J()(t,U),c=Q({light:n,dark:r},"text");return Object(d.jsx)(H.default,Y({style:[{color:c},e]},o))}function Z(t){var e=t.style,n=t.lightColor,r=t.darkColor,o=J()(t,V),c=Q({light:n,dark:r},"background");return Object(d.jsx)(K.default,Y({style:[{backgroundColor:c},e]},o))}function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){g()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t){return Object(d.jsx)(X,tt(tt({},t),{},{style:[t.style,{fontFamily:"space-mono"}]}))}function nt(t){var e=t.disabled,n=t.isLoading,r=t.onPress,o=t.title,c=w(),i=Object(s.useMemo)((function(){return{backgroundColor:"dark"===c?G.dark.button:G.light.button}}),[c]),a=Object(s.useMemo)((function(){return{color:"dark"===c?G.dark.buttonTint:G.light.buttonTint}}),[c]),u=Object(s.useMemo)((function(){return"dark"===c?G.dark.loading:G.light.loading}),[c]);return n?Object(d.jsx)(M.default,{disabled:!0,style:[rt.container,i],children:Object(d.jsx)(B.default,{color:u})}):Object(d.jsx)(M.default,{disabled:e,onPress:r,style:[rt.container,i],children:Object(d.jsx)(et,{style:a,children:o})})}var rt=L.default.create({container:{padding:20,minWidth:"30%",justifyContent:"center",alignItems:"center"}});function ot(t){var e=t.provider,n=t.authConfig,r=t.authHook,o=t.successCallback,c=t.errorCallback,a=t.isLoading,u=t.startOAuth,s=r(n),f=i()(s,3),b=f[0],O=f[1],p=f[2];l.a.useEffect((function(){console.log("response",{response:O}),"dismiss"!==(null==O?void 0:O.type)&&"cancel"!==(null==O?void 0:O.type)||c(e.toUpperCase()+" Authentication was "+(null==O?void 0:O.type)+"ed"),"success"===(null==O?void 0:O.type)&&O.authentication&&o(O.authentication),"error"===(null==O?void 0:O.type)&&O.error&&c(O.error.message)}),[O]);var h=l.a.useCallback((function(){u(e),p()}),[e,u,p]);return Object(d.jsx)(nt,{isLoading:a,disabled:!b,onPress:h,title:"Login with "+e})}L.default.create({text:{color:G.light.buttonTint}});var ct=n(113);N.maybeCompleteAuthSession();var it={androidClientId:ct.GOOGLE_ANDROID_ID,webClientId:ct.GOOGLE_WEB_ID},at={clientId:ct.FACEBOOK_ID,responseType:R.ResponseType.Token};function ut(t){z()(t);var e=Object(s.useContext)(h),n=e.authorizeSucceed,r=e.authorizeFailed,o=e.startOAuth,c=function(t){var e=t.state;return e&&"init"!==e&&"isLoading"in e&&e.isLoading?e.provider:null}(e),i="facebook"===c,a="google"===c,u=function(t){var e=t.state;return e&&"init"!==e&&"error"in e?e.error:null}(e);return l.a.useEffect((function(){return"web"!==f.default.OS&&N.warmUpAsync(),function(){"web"!==f.default.OS&&N.coolDownAsync()}}),[]),Object(d.jsxs)(Z,{style:st.container,children:[u&&Object(d.jsxs)(et,{children:["Error: ",u]}),u&&Object(d.jsx)(Z,{style:st.separator}),Object(d.jsx)(ot,{provider:"google",authConfig:it,authHook:F.useAuthRequest,successCallback:n,errorCallback:r,startOAuth:o,isLoading:a}),Object(d.jsx)(Z,{style:st.separator}),Object(d.jsx)(ot,{provider:"facebook",authConfig:at,authHook:T.useAuthRequest,successCallback:n,errorCallback:r,startOAuth:o,isLoading:i})]})}var st=L.default.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),lt=function(t){return fetch("https://www.googleapis.com/oauth2/v3/userinfo?access_token="+t)},ft=function(t){return fetch("https://graph.facebook.com/me?fields=email,name&access_token="+t)};function dt(t){z()(t);var e=function(){var t=Object(s.useContext)(h).state,e=Object(s.useState)(null),n=i()(e,2),r=n[0],o=n[1];return Object(s.useEffect)((function(){t&&"init"!==t&&"token"in t&&("google"===t.provider?lt:ft)(t.token.accessToken).then((function(t){return t.json()})).then((function(t){return o(t.email)}))}),[]),r}(),n=Object(s.useContext)(h),r=n.state,o=n.logout,c=r&&"string"!==typeof r&&r.provider||"";return Object(d.jsxs)(Z,{style:bt.container,children:[Object(d.jsxs)(et,{children:["Provider: ",c]}),Object(d.jsx)(et,{children:e}),Object(d.jsx)(nt,{onPress:o,title:"Logout"})]})}var bt=L.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}});function Ot(t){var e=t.navigation,n=Object(s.useContext)(h),r=p(n),o=w(),c=Object(s.useMemo)((function(){return"dark"===o?G.dark.loading:G.light.loading}),[o]);return console.log("NotAuthorizedScreen"),l.a.useEffect((function(){r?e.replace("Authorized"):e.replace("NotAuthorized")}),[r]),Object(d.jsx)(Z,{style:pt.container,children:Object(d.jsx)(B.default,{size:"large",color:c})})}var pt=L.default.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),ht={prefixes:[n(55).createURL("/"),"http://localhost:19006","https://chocky335.xyz","expoauthapp://"],config:{screens:{Authorized:"dash",NotAuthorized:"welcome",NotFound:"*"}}};function jt(t){var e=t.colorScheme;return Object(d.jsx)(P.default,{linking:ht,theme:"dark"===e?D.default:E.default,children:Object(d.jsx)(yt,{})})}var gt=Object(_.default)();function yt(){var t=s.useContext(h),e=p(t);return console.log("RootNavigator.isAuth",{isAuth:e}),Object(d.jsxs)(gt.Navigator,{children:[!e&&Object(d.jsx)(gt.Screen,{name:"NotAuthorized",component:ut,options:{title:"Please authorize"}}),e&&Object(d.jsx)(gt.Screen,{name:"Authorized",component:dt,options:{title:"Authorized"}}),Object(d.jsx)(gt.Screen,{name:"NotFound",component:Ot})]})}function vt(){var t=function(){var t=Object(s.useState)(!1),e=i()(t,2),r=e[0],o=e[1];return Object(s.useEffect)((function(){function t(){return(t=v()((function*(){try{x.preventAutoHideAsync(),yield k.loadAsync(C(C({},m.default.font),{},{"space-mono":n(226)}))}catch(t){console.warn(t)}finally{o(!0),x.hideAsync()}}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),r}(),e=w();return t?Object(d.jsxs)(o.SafeAreaProvider,{children:[Object(d.jsx)(O,{children:Object(d.jsx)(jt,{colorScheme:e})}),Object(d.jsx)(r.StatusBar,{})]}):null}},205:function(t,e,n){t.exports=n(270)},226:function(t,e,n){t.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},239:function(t,e){}},[[205,1,2]]]);
//# sourceMappingURL=app.175a3cbb.chunk.js.map